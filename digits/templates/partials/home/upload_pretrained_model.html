<script type="text/javascript" src="{{ url_for('static', filename='js/components/PretrainedModel.js') }}"></script>


{% set size = 550 %}
{% set url  = "/pretrained_models/new" %}

<style>
.closeButton {
  color: "white";
  position: relative;
  z-index: 1;
}

.modalBody {
  height: {{size}}px;
  width: {{size}}px;
  top: 50%;
  margin: -{{size/2}}px auto;
  position: relative;
}

.modalHeader {
  position: relative;
  top: -10px;
  margin: 0px;
  font-size: 16px;
}
.modalOuter {
  width: 100%;
  height: 100%;
  background: rgba(0,0,0,0.5);
  position: fixed;
  top: 0px;
  left: 0px;
  z-index: 1000;
}
.modalLabel: {font-size: 13px;}

</style>

<div class="modalOuter closeModal" style="display: none;">
  <div class="panel panel-default modalBody">
    <!-- Navigation -->
    <div style="width: 100%; text-align:right">
      <a class="btn btn-danger btn-xs closeButton" onclick="closeModal()">
        <span class="glyphicon glyphicon-remove"></span>
      </a>
    </div>

    <!-- Content -->
    <form style="top: -20px; position: relative; padding: 10px {{size/10}}px" action="{{url}}" method="post" enctype="multipart/form-data">
      <h4 style="modalHeader">Upload Pretrained Model</h4>
      <div id="pretrainedModelContent"></div>
    </form>
  </div>
</div>

<script>

function closeModal(){
  d3.select(".modalOuter").style("display","none");
}

$(document).ready(function(){

  var pretrainedModel = new PretrainedModel({selector:"#pretrainedModelContent"});

  $("#uploadPretrainedModel").on("click",function(e){
    e.preventDefault();
    d3.select(".modalOuter").style("display","block");
    pretrainedModel.render();
  });

  d3.select(".modalBody").on("click", function(){
    d3.event.stopPropagation();
  });

  d3.select(".closeModal").on("click", function(){
    closeModal();
  });


});
</script>
